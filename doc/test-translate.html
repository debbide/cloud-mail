<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram ç¿»è¯‘åŠŸèƒ½æµ‹è¯•é¡µé¢</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
            max-width: 800px;
            width: 100%;
        }

        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .test-section {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .result {
            margin-top: 20px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .result h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .result-text {
            color: #333;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .error {
            border-left-color: #f44336;
        }

        .error h3 {
            color: #f44336;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #ffffff;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .info-box {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 30px;
        }

        .info-box h3 {
            color: #2196f3;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .info-box p {
            color: #555;
            font-size: 13px;
            line-height: 1.6;
        }

        .info-box code {
            background: rgba(33, 150, 243, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“§ Telegram ç¿»è¯‘åŠŸèƒ½æµ‹è¯•</h1>
        <p class="subtitle">æµ‹è¯• Cloud Mail Telegram é‚®ä»¶æ¨é€é¡µé¢çš„ç¿»è¯‘åŠŸèƒ½</p>

        <div class="info-box">
            <h3>ğŸ“ æµ‹è¯•è¯´æ˜</h3>
            <p>
                1. è¾“å…¥ä½ çš„ API åœ°å€ï¼ˆä¾‹å¦‚ï¼š<code>https://your-domain.com/api</code>ï¼‰<br>
                2. è¾“å…¥è¦ç¿»è¯‘çš„æ–‡æœ¬å†…å®¹<br>
                3. é€‰æ‹©ç›®æ ‡è¯­è¨€<br>
                4. ç‚¹å‡»ã€Œå¼€å§‹ç¿»è¯‘ã€æŒ‰é’®<br>
                5. æŸ¥çœ‹ç¿»è¯‘ç»“æœ
            </p>
        </div>

        <div class="test-section">
            <label for="apiUrl">API åœ°å€</label>
            <input type="text" id="apiUrl" placeholder="ä¾‹å¦‚: https://mail.example.com/api" value="/api">
        </div>

        <div class="test-section">
            <label for="text">è¦ç¿»è¯‘çš„æ–‡æœ¬</label>
            <textarea id="text" placeholder="è¾“å…¥è¦ç¿»è¯‘çš„æ–‡æœ¬å†…å®¹...">Hello! This is a test email from Cloud Mail. We are testing the translation feature integrated into the Telegram email preview page. The translation supports multiple languages including Chinese, English, Japanese, Korean, Spanish, French, German, and Russian.</textarea>
        </div>

        <div class="test-section">
            <label for="targetLang">ç›®æ ‡è¯­è¨€</label>
            <select id="targetLang">
                <option value="zh">ä¸­æ–‡ (Chinese)</option>
                <option value="en" selected>è‹±æ–‡ (English)</option>
                <option value="ja">æ—¥è¯­ (Japanese)</option>
                <option value="ko">éŸ©è¯­ (Korean)</option>
                <option value="es">è¥¿ç­ç‰™è¯­ (Spanish)</option>
                <option value="fr">æ³•è¯­ (French)</option>
                <option value="de">å¾·è¯­ (German)</option>
                <option value="ru">ä¿„è¯­ (Russian)</option>
            </select>
        </div>

        <button id="translateBtn" onclick="testTranslate()">
            å¼€å§‹ç¿»è¯‘
        </button>

        <div id="result" style="display: none;"></div>
    </div>

    <script>
        async function testTranslate() {
            const apiUrl = document.getElementById('apiUrl').value.trim();
            const text = document.getElementById('text').value.trim();
            const targetLang = document.getElementById('targetLang').value;
            const resultDiv = document.getElementById('result');
            const translateBtn = document.getElementById('translateBtn');

            if (!apiUrl) {
                alert('è¯·è¾“å…¥ API åœ°å€');
                return;
            }

            if (!text) {
                alert('è¯·è¾“å…¥è¦ç¿»è¯‘çš„æ–‡æœ¬');
                return;
            }

            translateBtn.disabled = true;
            translateBtn.innerHTML = '<span class="loading"></span>ç¿»è¯‘ä¸­...';
            resultDiv.style.display = 'none';

            try {
                const response = await fetch(`${apiUrl}/telegram/translate`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        text: text,
                        targetLang: targetLang
                    })
                });

                const data = await response.json();

                if (data.code === 200) {
                    resultDiv.className = 'result';
                    resultDiv.innerHTML = `
                        <h3>âœ… ç¿»è¯‘æˆåŠŸ</h3>
                        <div class="result-text">${escapeHtml(data.data.translatedText)}</div>
                    `;
                } else {
                    throw new Error(data.msg || 'ç¿»è¯‘å¤±è´¥');
                }

            } catch (error) {
                console.error('ç¿»è¯‘é”™è¯¯:', error);
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `
                    <h3>âŒ ç¿»è¯‘å¤±è´¥</h3>
                    <div class="result-text">${escapeHtml(error.message)}</div>
                `;
            } finally {
                translateBtn.disabled = false;
                translateBtn.innerHTML = 'å¼€å§‹ç¿»è¯‘';
                resultDiv.style.display = 'block';
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // å›è½¦é”®è§¦å‘ç¿»è¯‘
        document.getElementById('text').addEventListener('keypress', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                testTranslate();
            }
        });
    </script>
</body>
</html>
